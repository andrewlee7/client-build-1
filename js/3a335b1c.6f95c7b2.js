(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["3a335b1c"],{"0676":function(t,e){function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}t.exports=r},"11b0":function(t,e,r){var n=r("2a06"),a=r("883d");function i(t){if(a(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return n(t)}t.exports=i},"20fd":function(t,e,r){"use strict";var n=r("d9f6"),a=r("aebd");t.exports=function(t,e,r){e in t?n.f(t,e,a(0,r)):t[e]=r}},2236:function(t,e){function r(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}t.exports=r},2246:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("q-page",[r("loading",{attrs:{firstOnly:"",query:t.$apollo.queries.resources}},[r("scroll",{attrs:{paging:!1},on:{loadMore:t.loadMore}},[r("q-pull-to-refresh",{attrs:{handler:t.refresher}},[t.resources&&t.resources.length?r("q-list",{staticStyle:{"border-left":"none","border-right":"none"},attrs:{separator:""}},t._l(t.resources,function(e){return r("q-item",{key:e.id,staticStyle:{padding:"16px 24px"},attrs:{multiline:"",to:e.id,append:""}},[r("q-item-main",{attrs:{label:e.title}},[e.inactive||e.featured||"ACTIVE"!==e.status?r("q-item-tile",{staticClass:"q-mb-sm",attrs:{stamp:""}},[e.inactive||"INACTIVE"===e.status?r("q-chip",{attrs:{icon:"far fa-eye-slash",color:"warning",small:""}},[t._v("\n                  Inactive\n                ")]):t._e(),"PENDING"===e.status?r("q-chip",{attrs:{icon:"far fa-eye-slash",color:"warning",small:""}},[t._v("\n                  Pending\n                ")]):t._e(),"DRAFT"===e.status?r("q-chip",{attrs:{icon:"far fa-eye-slash",color:"warning",small:""}},[t._v("\n                  Draft\n                ")]):t._e(),"DECLINED"===e.status?r("q-chip",{attrs:{icon:"far fa-eye-slash",color:"warning",small:""}},[t._v("\n                  Declined\n                ")]):t._e(),e.featured?r("q-chip",{attrs:{icon:"star",color:"positive",small:""}},[t._v("\n                  Featured\n                ")]):t._e(),e.forceFeatured?r("q-chip",{attrs:{icon:"star",color:"positive",small:""}},[t._v("\n                  Always show in featured\n                ")]):t._e()],1):t._e(),r("q-item-tile",{staticClass:"q-mb-sm",attrs:{stamp:""}},[t._v(t._s(e.resourceCategory?e.resourceCategory.name:"NO CATEGORY"))]),r("q-item-tile",{staticClass:"q-mb-sm",attrs:{stamp:""}},[t._v("Tags: "+t._s(t.categoryList(e)))]),r("q-item-tile",{attrs:{stamp:""}},[t._v(t._s(t.formatDuration(e.duration))+" - "+t._s(t.formatAgeRange(e.ageFrom,e.ageTo)))]),r("q-item-tile",{attrs:{stamp:""}})],1),r("q-item-side",{staticStyle:{"padding-left":"16px"},attrs:{right:""}},[r("q-item-tile",{attrs:{stamp:""}},[r("aws-image",{attrs:{src:e.image,width:"64","image-width":300,tag:"thumb"}})],1)],1)],1)})):r("transition",{attrs:{"enter-active-class":"animated fadeIn",appear:""}},[r("q-alert",{staticClass:"q-mb-sm",attrs:{color:"info",icon:"error",appear:""}},[t._v("\n            You have no "+t._s(t.currentFilterType)+", click below to add one.\n          ")])],1)],1)],1)],1),r("q-layout-footer",[r("div",{staticClass:"content-footer justify-center footer-buttons",attrs:{inverted:"",color:"white"}}),t.resources&&t.resources.length?r("q-pagination",{staticClass:"row justify-center",attrs:{min:1,max:t.numPages,"direction-links":"","max-pages":10},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e(),r("q-btn",{staticClass:"float-right inline-block",attrs:{flat:"",icon:"fas fa-search",label:"Search",color:t.hasFilter?"primary":"grey-9"},on:{click:t.openFilter}})],1),r("q-modal",{staticClass:"filter-modal",model:{value:t.filterModal,callback:function(e){t.filterModal=e},expression:"filterModal"}},[r("div",{staticClass:"q-title q-pa-md",staticStyle:{"box-shadow":"0px 1px 1px rgba(0,0,0,0.08)"}},[t._v("Search and Filter\n      "),r("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],staticStyle:{float:"right",position:"relative",top:"-4px",opacity:"0.6"},attrs:{flat:"",round:"",dense:"",icon:"fa fa-times"}})],1),t.filterModal?r("content-filter",{attrs:{"enable-status":"",isPublisher:t.isPublisher,admin:""},model:{value:t.modalFilter,callback:function(e){t.modalFilter=e},expression:"modalFilter"}}):t._e(),r("div",{staticClass:"content-footer text-center"},[r("q-btn",{staticClass:"q-mr-md",staticStyle:{"border-radius":"0"},attrs:{color:"secondary",label:"Clear Search",size:"lg",noCaps:""},on:{click:t.clearFilter}}),r("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],staticStyle:{"border-radius":"0"},attrs:{color:"primary",label:"Save and Close",size:"lg",noCaps:""},on:{click:t.applyFilter}})],1)],1),r("q-page-sticky",{attrs:{position:"bottom-right",offset:[18,18]}},[r("q-fab",{ref:"newUserButton",attrs:{color:"primary",icon:"fa fa-plus"},on:{show:function(e){t.$router.push(t.newResourcePath)}}})],1),t.$apollo.loading?t._e():r("q-page-sticky",{attrs:{position:"bottom-right"}},[r("q-btn",{staticClass:"fixed",staticStyle:{right:"18px",bottom:"18px",width:"56px",height:"56px","font-size":"20px"},attrs:{round:"",color:"positive",icon:"fa fa-file-csv",direction:"up"},on:{click:t.exportResources}})],1)],1)},a=[];n._withStripped=!0;r("cadf"),r("456d"),r("ac4d"),r("8a81"),r("ac6a");var i=r("448a"),o=r.n(i),s=(r("7f7f"),r("3156")),c=r.n(s),u=r("de9e"),l=r("2bae"),f=r("bf49"),d=r("858b"),p=r("f6ed"),h=r("fcab"),g=r("bc58"),m=r("2f62"),y=r("f490"),v=y["d"].formatDate,b={name:"ResourceList",components:{awsImage:h["a"],ContentFilter:g["a"]},mixins:[d["a"],p["a"]],data:function(){return{pageSize:100,page:1,enableStatus:!0,exporting:!1}},watch:{contentFilter:{deep:!0,handler:function(){this.page=1}}},computed:c()({isPublisher:function(){return"org-resources"===this.$route.name},newResourcePath:function(){return this.isPublisher?"/org-resources/new":"/resources/new"},numPages:function(){return Math.ceil(this.numResources/this.pageSize)}},Object(m["c"])("app",["contentFilter"])),methods:{refresher:function(t){this.$apollo.queries.resources.refetch(),setTimeout(function(){t()},500)},loadMore:function(t){var e=this,r=this.resources[this.resources.length-1].id;r!==this.lastId&&(this.lastId=r,this.$apollo.queries.resources.fetchMore({variables:{first:this.pageLength,after:this.lastId,type:this.currentFilter||"COURSE"},updateQuery:function(r,n){var a=n.fetchMoreResult;return a.resources.length?t():t(!0),{resources:o()(e.resources).concat(o()(a.resources))}}}))},exportResources:function(){var t=this;if(!this.exporting){this.exporting=!0;var e=this.constructFilter();e.showAll=!0,e.first=1e4,"org-resources"===this.$route.name&&(e.filter.organization={id:this.$store.state.app.organizationId}),this.$apollo.query({query:u["j"],variables:e}).then(function(e){var r=t.createReportJSON(e.data.resources),n=t.convertJsonToCSV(r);t.downloadReport(n),t.exporting=!1})}},createReportJSON:function(t){var e=[],r=!0,n=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var s=i.value,c=s.status;s.inactive&&(c="INACTIVE");var u={Title:s.title,"Created At":v(s.createdAt,"M/D/YYYY HH:mm:ss"),"Updated At":v(s.updatedAt,"M/D/YYYY HH:mm:ss"),Type:s.type,Organization:s.organization&&s.organization.name,Status:c,Category:s.resourceCategory&&s.resourceCategory.name,"Age Range":"".concat(s.ageFrom," - ").concat(s.ageTo),"Grade Range":"".concat(s.gradeFrom||"K"," - ").concat(s.gradeTo),Duration:s.duration,Featured:s.featured,"Number of Reviews":s.numReviews,Rating:s.rating},l=[],f=!0,d=!1,p=void 0;try{for(var h,g=this.contentStandards[Symbol.iterator]();!(f=(h=g.next()).done);f=!0){var m=h.value,y=!0,b=!1,w=void 0;try{for(var S,x=s.contentStandards[Symbol.iterator]();!(y=(S=x.next()).done);y=!0){var C=S.value;C.id===m.id&&l.push(m.name)}}catch(t){b=!0,w=t}finally{try{y||null==x.return||x.return()}finally{if(b)throw w}}}}catch(t){d=!0,p=t}finally{try{f||null==g.return||g.return()}finally{if(d)throw p}}u["Constent Standards "]=l.join(", ");var k=[],q=!0,_=!1,$=void 0;try{for(var F,O=this.categories[Symbol.iterator]();!(q=(F=O.next()).done);q=!0){var I=F.value,R=!0,A=!1,j=void 0;try{for(var T,P=s.categories[Symbol.iterator]();!(R=(T=P.next()).done);R=!0){var N=T.value;N.id===I.id&&k.push(I.category)}}catch(t){A=!0,j=t}finally{try{R||null==P.return||P.return()}finally{if(A)throw j}}u["Categories"]=k.join(", ")}}catch(t){_=!0,$=t}finally{try{q||null==O.return||O.return()}finally{if(_)throw $}}e.push(u)}}catch(t){n=!0,a=t}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}return e},convertJsonToCSV:function(t){var e=function(t,e){return null===e?"":e},r=Object.keys(t[0]),n=t.map(function(t){return r.map(function(r){return JSON.stringify(t[r],e)}).join(",")});return n.unshift(r.join(",")),n=n.join("\r\n"),n},downloadReport:function(t){var e=window.URL.createObjectURL(new Blob([t])),r=document.createElement("a");r.href=e,r.setAttribute("download","report_analysis.csv"),document.body.appendChild(r),r.click()}},apollo:{numResources:{query:u["l"],fetchPolicy:"cache-and-network",variables:function(){var t=this.constructFilter();return t.showAll=!0,"org-resources"===this.$route.name&&(t.filter.organization={id:this.$store.state.app.organizationId}),t},skip:function(){return!this.currentFilter}},resources:{query:u["j"],fetchPolicy:"cache-and-network",variables:function(){var t=this.constructFilter();return t.showAll=!0,t.first=this.pageSize,t.skip=(this.page-1)*this.pageSize,"org-resources"===this.$route.name&&(t.filter.organization={id:this.$store.state.app.organizationId}),t},skip:function(){return!this.currentFilter}},categories:{query:l["a"],fetchPolicy:"cache-and-network"},contentStandards:{query:f["a"],fetchPolicy:"cache-and-network"}}},w=b,S=(r("768bd"),r("2877")),x=Object(S["a"])(w,n,a,!1,null,null,null);x.options.__file="ResourceList.vue";e["default"]=x.exports},"2a06":function(t,e,r){t.exports=r("d2d5")},"2bae":function(t,e,r){"use strict";r.d(e,"a",function(){return h}),r.d(e,"b",function(){return g}),r.d(e,"d",function(){return m}),r.d(e,"e",function(){return y}),r.d(e,"c",function(){return v});var n=r("5640"),a=r.n(n),i=r("9530"),o=r.n(i);function s(){var t=a()(["\n  mutation CreateCategoryMutation(\n    $category: String!,\n    $description: String\n  ) {\n    createCategory(\n      data: {\n        category: $category,\n        description: $description\n      }\n    )\n    {\n      ...CategoryFragment\n    }\n  }\n  ","\n"]);return s=function(){return t},t}function c(){var t=a()(["\n  mutation UpdateCategoryMutation(\n    $id: ID!\n    $category: String!,\n    $description: String\n  ) {\n    updateCategory(\n      where: {id: $id}\n      data: {\n        category: $category,\n        description: $description\n      }\n    )\n    {\n      ...CategoryFragment\n    }\n  }\n  ","\n"]);return c=function(){return t},t}function u(){var t=a()(["\n  mutation DeleteCategoryMutation($id: ID!) {\n    deleteCategory(where: {id: $id }) {\n      id\n    }\n  }\n"]);return u=function(){return t},t}function l(){var t=a()(["\n  query CategoryQuery($id: ID!) {\n    category(where: {\n      id: $id\n    }) {\n      ...CategoryFragment\n    }\n  }\n  ","\n"]);return l=function(){return t},t}function f(){var t=a()(["\n  query CategoryQuery {\n    categories(orderBy: category_ASC) {\n      ...CategoryFragment\n    }\n  }\n  ","\n"]);return f=function(){return t},t}function d(){var t=a()(["\n  fragment CategoryFragment on Category {\n    id\n    category\n    description\n  }\n"]);return d=function(){return t},t}var p=o()(d()),h=o()(f(),p),g=o()(l(),p),m=o()(u()),y=o()(c(),p),v=o()(s(),p)},"37c8":function(t,e,r){e.f=r("2b4c")},"3a72":function(t,e,r){var n=r("7726"),a=r("8378"),i=r("2d00"),o=r("37c8"),s=r("86cc").f;t.exports=function(t){var e=a.Symbol||(a.Symbol=i?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:o.f(t)})}},"3cea":function(t,e,r){},"41e2":function(t,e,r){},"448a":function(t,e,r){var n=r("2236"),a=r("11b0"),i=r("0676");function o(t){return n(t)||a(t)||i()}t.exports=o},"549b":function(t,e,r){"use strict";var n=r("d864"),a=r("63b6"),i=r("241e"),o=r("b0dc"),s=r("3702"),c=r("b447"),u=r("20fd"),l=r("7cd6");a(a.S+a.F*!r("4ee1")(function(t){Array.from(t)}),"Array",{from:function(t){var e,r,a,f,d=i(t),p="function"==typeof this?this:Array,h=arguments.length,g=h>1?arguments[1]:void 0,m=void 0!==g,y=0,v=l(d);if(m&&(g=n(g,h>2?arguments[2]:void 0,2)),void 0==v||p==Array&&s(v))for(e=c(d.length),r=new p(e);e>y;y++)u(r,y,m?g(d[y],y):d[y]);else for(f=v.call(d),r=new p;!(a=f.next()).done;y++)u(r,y,m?o(f,g,[a.value,y],!0):a.value);return r.length=y,r}})},"54a1":function(t,e,r){r("6c1c"),r("1654"),t.exports=r("95d5")},"768bd":function(t,e,r){"use strict";var n=r("3cea"),a=r.n(n);a.a},"7bbc":function(t,e,r){var n=r("6821"),a=r("9093").f,i={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return a(t)}catch(t){return o.slice()}};t.exports.f=function(t){return o&&"[object Window]"==i.call(t)?s(t):a(n(t))}},"7d7e":function(t,e,r){"use strict";r.d(e,"a",function(){return c});var n=r("5640"),a=r.n(n),i=r("9530"),o=r.n(i);function s(){var t=a()(["\n  mutation ConvertImageMutation($key: String!, $tag: String!, $width: Int!){\n    convertImage(\n      key: $key\n      tag: $tag\n      width: $width\n    ){\n      success\n      error\n      info\n    }\n  }\n"]);return s=function(){return t},t}var c=o()(s())},"883d":function(t,e,r){t.exports=r("54a1")},"8a81":function(t,e,r){"use strict";var n=r("7726"),a=r("69a8"),i=r("9e1e"),o=r("5ca1"),s=r("2aba"),c=r("67ab").KEY,u=r("79e5"),l=r("5537"),f=r("7f20"),d=r("ca5a"),p=r("2b4c"),h=r("37c8"),g=r("3a72"),m=r("d4c0"),y=r("1169"),v=r("cb7c"),b=r("d3f4"),w=r("4bf8"),S=r("6821"),x=r("6a99"),C=r("4630"),k=r("2aeb"),q=r("7bbc"),_=r("11e9"),$=r("2621"),F=r("86cc"),O=r("0d58"),I=_.f,R=F.f,A=q.f,j=n.Symbol,T=n.JSON,P=T&&T.stringify,N="prototype",E=p("_hidden"),M=p("toPrimitive"),D={}.propertyIsEnumerable,z=l("symbol-registry"),J=l("symbols"),U=l("op-symbols"),Y=Object[N],L="function"==typeof j&&!!$.f,V=n.QObject,W=!V||!V[N]||!V[N].findChild,G=i&&u(function(){return 7!=k(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a})?function(t,e,r){var n=I(Y,e);n&&delete Y[e],R(t,e,r),n&&t!==Y&&R(Y,e,n)}:R,H=function(t){var e=J[t]=k(j[N]);return e._k=t,e},Q=L&&"symbol"==typeof j.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof j},B=function(t,e,r){return t===Y&&B(U,e,r),v(t),e=x(e,!0),v(r),a(J,e)?(r.enumerable?(a(t,E)&&t[E][e]&&(t[E][e]=!1),r=k(r,{enumerable:C(0,!1)})):(a(t,E)||R(t,E,C(1,{})),t[E][e]=!0),G(t,e,r)):R(t,e,r)},K=function(t,e){v(t);var r,n=m(e=S(e)),a=0,i=n.length;while(i>a)B(t,r=n[a++],e[r]);return t},X=function(t,e){return void 0===e?k(t):K(k(t),e)},Z=function(t){var e=D.call(this,t=x(t,!0));return!(this===Y&&a(J,t)&&!a(U,t))&&(!(e||!a(this,t)||!a(J,t)||a(this,E)&&this[E][t])||e)},tt=function(t,e){if(t=S(t),e=x(e,!0),t!==Y||!a(J,e)||a(U,e)){var r=I(t,e);return!r||!a(J,e)||a(t,E)&&t[E][e]||(r.enumerable=!0),r}},et=function(t){var e,r=A(S(t)),n=[],i=0;while(r.length>i)a(J,e=r[i++])||e==E||e==c||n.push(e);return n},rt=function(t){var e,r=t===Y,n=A(r?U:S(t)),i=[],o=0;while(n.length>o)!a(J,e=n[o++])||r&&!a(Y,e)||i.push(J[e]);return i};L||(j=function(){if(this instanceof j)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(r){this===Y&&e.call(U,r),a(this,E)&&a(this[E],t)&&(this[E][t]=!1),G(this,t,C(1,r))};return i&&W&&G(Y,t,{configurable:!0,set:e}),H(t)},s(j[N],"toString",function(){return this._k}),_.f=tt,F.f=B,r("9093").f=q.f=et,r("52a7").f=Z,$.f=rt,i&&!r("2d00")&&s(Y,"propertyIsEnumerable",Z,!0),h.f=function(t){return H(p(t))}),o(o.G+o.W+o.F*!L,{Symbol:j});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),at=0;nt.length>at;)p(nt[at++]);for(var it=O(p.store),ot=0;it.length>ot;)g(it[ot++]);o(o.S+o.F*!L,"Symbol",{for:function(t){return a(z,t+="")?z[t]:z[t]=j(t)},keyFor:function(t){if(!Q(t))throw TypeError(t+" is not a symbol!");for(var e in z)if(z[e]===t)return e},useSetter:function(){W=!0},useSimple:function(){W=!1}}),o(o.S+o.F*!L,"Object",{create:X,defineProperty:B,defineProperties:K,getOwnPropertyDescriptor:tt,getOwnPropertyNames:et,getOwnPropertySymbols:rt});var st=u(function(){$.f(1)});o(o.S+o.F*st,"Object",{getOwnPropertySymbols:function(t){return $.f(w(t))}}),T&&o(o.S+o.F*(!L||u(function(){var t=j();return"[null]"!=P([t])||"{}"!=P({a:t})||"{}"!=P(Object(t))})),"JSON",{stringify:function(t){var e,r,n=[t],a=1;while(arguments.length>a)n.push(arguments[a++]);if(r=e=n[1],(b(e)||void 0!==t)&&!Q(t))return y(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!Q(e))return e}),n[1]=e,P.apply(T,n)}}),j[N][M]||r("32e9")(j[N],M,j[N].valueOf),f(j,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},"95d5":function(t,e,r){var n=r("40c3"),a=r("5168")("iterator"),i=r("481b");t.exports=r("584a").isIterable=function(t){var e=Object(t);return void 0!==e[a]||"@@iterator"in e||i.hasOwnProperty(n(e))}},ac4d:function(t,e,r){r("3a72")("asyncIterator")},bd43:function(t,e,r){"use strict";var n=r("41e2"),a=r.n(n);a.a},d2d5:function(t,e,r){r("1654"),r("549b"),t.exports=r("584a").Array.from},d4c0:function(t,e,r){var n=r("0d58"),a=r("2621"),i=r("52a7");t.exports=function(t){var e=n(t),r=a.f;if(r){var o,s=r(t),c=i.f,u=0;while(s.length>u)c.call(t,o=s[u++])&&e.push(o)}return e}},fcab:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"fill"},[t.imageUrl?r("img",{attrs:{src:t.imageUrl}}):t._e()])},a=[];n._withStripped=!0;r("96cf");var i=r("c973"),o=r.n(i),s=(r("c5f6"),r("9755")),c=r("d67a"),u=r("7d7e"),l={name:"awsImage",props:{src:Object,default:String,expires:{type:Number,default:86400},tag:String,imageWidth:Number},methods:{tokenExpired:function(){var t=o()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].dispatch("getCurrentSession");case 2:if(e=t.sent.getAccessToken().getJwtToken(),this.$store.state.app.jwtToken!==e){t.next=5;break}return t.abrupt("return",!1);case 5:return this.$store.dispatch("app/setJwtToken",e),t.abrupt("return",!0);case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),cachedUrl:function(){var t=o()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.src.url){t.next=2;break}return t.abrupt("return",this.src.url);case 2:return t.next=4,this.tokenExpired();case 4:if(!t.sent){t.next=7;break}return this.$store.dispatch("app/clearAwsCache"),t.abrupt("return");case 7:return t.abrupt("return",this.$store.getters["app/getAwsUrl"](this.awsSecret));case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),generateThumbnail:function(){var t=o()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$apollo.mutate({mutation:u["a"],variables:{key:this.src.secret,tag:this.tag,width:this.imageWidth}});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},computed:{isThumbnail:function(){return!!(this.src.secret&&this.tag&&this.imageWidth)},awsSecret:function(){return this.isThumbnail?"".concat(this.src.secret,"_").concat(this.tag):this.src.secret}},asyncComputed:{imageUrl:function(){var t=o()(regeneratorRuntime.mark(function t(){var e,r,n,a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.src){t.next=2;break}return t.abrupt("return",this.default);case 2:return t.next=4,this.cachedUrl();case 4:if(e=t.sent,!e){t.next=7;break}return t.abrupt("return",e);case 7:if(!this.awsSecret){t.next=24;break}if(n=this.awsSecret,!this.isThumbnail){t.next=18;break}return t.next=12,s["a"].list(this.awsSecret);case 12:if(a=t.sent,a.length){t.next=18;break}return t.next=16,this.generateThumbnail();case 16:i=t.sent,i&&i.data&&i.data.convertImage&&i.data.convertImage.success||(n=this.src.secret);case 18:return t.next=20,s["a"].get(n,{expires:this.expires});case 20:return e=t.sent,r=(new Date).getTime()+1e3*(this.expires-60),this.$store.dispatch("app/cacheAwsUrl",{key:this.awsSecret,expiration:r,url:e}),t.abrupt("return",e);case 24:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},f=l,d=(r("bd43"),r("2877")),p=Object(d["a"])(f,n,a,!1,null,null,null);p.options.__file="awsImage.vue";e["a"]=p.exports}}]);