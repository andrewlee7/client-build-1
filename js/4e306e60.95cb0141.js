(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["4e306e60"],{"0ff1":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={data:function(){return{statuses:[{label:"Active",value:"ACTIVE"},{label:"Inactive",value:"INACTIVE"},{label:"Draft",value:"DRAFT"},{label:"Pending",value:"PENDING"},{label:"Declined",value:"DECLINED"}]}}}},"37c8":function(t,e,n){e.f=n("2b4c")},"3a72":function(t,e,n){var r=n("7726"),i=n("8378"),a=n("2d00"),o=n("37c8"),s=n("86cc").f;t.exports=function(t){var e=i.Symbol||(i.Symbol=a?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:o.f(t)})}},"41e2":function(t,e,n){},"5ed7":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",[n("loading",{attrs:{query:t.$apollo.queries.proTips}},[n("scroll",[n("q-pull-to-refresh",{attrs:{handler:t.refresher}},[t.proTips&&t.proTips.length?n("q-list",{attrs:{separator:""}},t._l(t.proTips,function(e){return n("q-item",{key:e.id,attrs:{to:e.id,append:""}},[n("q-item-main",{attrs:{label:e.title}},[e.inactive||"INACTIVE"===e.status?n("q-item-tile",{staticClass:"q-mb-sm",attrs:{stamp:""}},[n("q-chip",{attrs:{icon:"far fa-eye-slash",color:"warning",small:""}},[t._v("\n                  Inactive\n                ")])],1):t._e(),"DRAFT"===e.status?n("q-item-tile",{staticClass:"q-mb-sm",attrs:{stamp:""}},[n("q-chip",{attrs:{icon:"far fa-eye-slash",color:"warning",small:""}},[t._v("\n                  Draft\n                ")])],1):t._e(),"PENDING"===e.status?n("q-item-tile",{staticClass:"q-mb-sm",attrs:{stamp:""}},[n("q-chip",{attrs:{icon:"far fa-eye-slash",color:"warning",small:""}},[t._v("\n                  Pending\n                ")])],1):t._e(),"DECLINED"===e.status?n("q-item-tile",{staticClass:"q-mb-sm",attrs:{stamp:""}},[n("q-chip",{attrs:{icon:"far fa-eye-slash",color:"warning",small:""}},[t._v("\n                  Declined\n                ")])],1):t._e()],1),n("q-item-side",{attrs:{right:""}},[n("q-item-tile",{attrs:{stamp:""}},[n("aws-image",{attrs:{src:e.image,width:"64","image-width":300,tag:"thumb"}})],1)],1)],1)})):n("transition",{attrs:{"enter-active-class":"animated fadeIn",appear:""}},[n("q-alert",{staticClass:"q-mb-sm",attrs:{color:"info",icon:"error",appear:""}},[t._v("\n            You have no ProTips, click below to add one.\n          ")])],1)],1)],1)],1),n("q-layout-footer",[n("div",{staticClass:"content-footer justify-center footer-buttons",attrs:{inverted:"",color:"white"}}),n("q-btn",{staticClass:"float-right inline-block",attrs:{flat:"",icon:"fas fa-search",label:"Search",color:t.hasFilter?"primary":"grey-9"},on:{click:t.openFilter}})],1),n("q-modal",{staticClass:"filter-modal",model:{value:t.filterModal,callback:function(e){t.filterModal=e},expression:"filterModal"}},[n("div",{staticClass:"q-title q-pa-md",staticStyle:{"box-shadow":"0px 1px 1px rgba(0,0,0,0.08)"}},[t._v("Search and Filter\n      "),n("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],staticStyle:{float:"right",position:"relative",top:"-4px",opacity:"0.6"},attrs:{flat:"",round:"",dense:"",icon:"fa fa-times"}})],1),t.filterModal?n("protip-filter",{attrs:{isPublisher:t.isPublisher},model:{value:t.modalFilter,callback:function(e){t.modalFilter=e},expression:"modalFilter"}}):t._e(),n("div",{staticClass:"content-footer text-center"},[n("q-btn",{staticClass:"q-mr-md",staticStyle:{"border-radius":"0"},attrs:{color:"secondary",label:"Clear Search",size:"lg",noCaps:""},on:{click:t.clearFilter}}),n("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],staticStyle:{"border-radius":"0"},attrs:{color:"primary",label:"Save and Close",size:"lg",noCaps:""},on:{click:t.applyFilter}})],1)],1),n("q-page-sticky",{attrs:{position:"bottom-right",offset:[18,18]}},[n("q-fab",{staticClass:"white",attrs:{color:"red",icon:"add"},on:{show:t.newProtip}})],1),n("q-page-sticky",{attrs:{position:"bottom-right",offset:[1,90]}},[n("q-btn",{staticClass:"fixed",staticStyle:{right:"18px",bottom:"18px",width:"56px",height:"56px","font-size":"20px"},attrs:{round:"",color:"positive",icon:"fa fa-file-csv",direction:"up"},on:{click:t.generateReportData}})],1)],1)},i=[];r._withStripped=!0;n("cadf"),n("456d"),n("ac4d"),n("8a81"),n("ac6a"),n("7f7f");var a=n("ed6f"),o=n("fcab"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"filter-modal-inner q-px-md q-py-lg"},[n("div",{staticClass:"flex items-start"},[n("q-field",{staticClass:"q-mb-md",attrs:{orientation:"vertical",label:"Status"}},[n("q-select",{attrs:{options:t.statuses,clearable:""},model:{value:t.value.status,callback:function(e){t.$set(t.value,"status",e)},expression:"value.status"}})],1)],1),n("div",{staticClass:"flex items-start"},[n("q-field",{staticClass:"q-mb-md",attrs:{orientation:"vertical",label:"Category"}},[n("q-select",{attrs:{options:t.proTipCategories,clearable:""},model:{value:t.value.protipCategory,callback:function(e){t.$set(t.value,"protipCategory",e)},expression:"value.protipCategory"}})],1)],1),n("q-field",{staticClass:"q-mt-sm q-mb-md",attrs:{orientation:"vertical",label:"Keyword"}},[n("q-search",{attrs:{clearable:""},model:{value:t.value.searchString,callback:function(e){t.$set(t.value,"searchString",e)},expression:"value.searchString"}})],1),t.isPublisher?t._e():n("div",{staticClass:"flex items-start"},[n("q-field",{staticClass:"q-mb-md",attrs:{orientation:"vertical",label:"Publisher"}},[n("q-select",{attrs:{options:t.allProtipPublishers,multiple:"",clearable:""},model:{value:t.value.publishers,callback:function(e){t.$set(t.value,"publishers",e)},expression:"value.publishers"}})],1)],1)],1)])},u=[];s._withStripped=!0;var l=n("de9e"),c=n("dd82"),p=n("0ff1"),f={name:"ProtipFilter",props:{value:Object,isPublisher:Boolean},mixins:[p["a"]],data:function(){return{proTipCategories:[],allProtipPublishers:[]}},watch:{value:{immediate:!0,handler:function(t){t.allProtipPublishers&&!this.isPublisher||(t.allProtipPublishers=[])}}},apollo:{proTipCategories:{query:c["a"],update:function(t){return t.proTipCategories.map(function(t){return{label:t.name,value:t.id}})}},allProtipPublishers:{query:l["b"],fetchPolicy:"cache-and-network",update:function(t){return t.allProtipPublishers.map(function(t){return{label:t.name,value:t.id}})}}}},d=f,m=(n("8843"),n("2877")),h=Object(m["a"])(d,s,u,!1,null,"1a3d3526",null);h.options.__file="protipFilter.vue";var g=h.exports,y=n("3156"),b=n.n(y),v=n("2f62"),$=n("b0d5"),C=n("2743"),w={mixins:[C["a"]],data:function(){return{filterModal:!1,modalFilter:null,proTipCategories:[]}},computed:b()({hasFilter:function(){return this.protipFilter.searchString||this.enableStatus&&this.protipFilter.status||this.protipFilter.protipCategory}},Object(v["c"])("app",["searchString","protipFilter"])),methods:{openFilter:function(){this.modalFilter=Object($["a"])({},this.protipFilter),this.filterModal=!0},applyFilter:function(){this.$store.dispatch("app/setProtipFilter",this.modalFilter)},clearFilter:function(){this.modalFilter={searchString:null,protipCategory:null,publishers:[],status:null}},constructFilter:function(){var t={filter:{AND:[]}};return this.protipFilter.status&&this.enableStatus&&(t.filter.status=this.protipFilter.status),this.enableStatus||delete t.filter.status,this.protipFilter.searchString&&t.filter.AND.push({OR:[{title_contains:this.protipFilter.searchString},{summary_contains:this.protipFilter.searchString}]}),this.hasFilter&&(this.protipFilter.protipCategory&&t.filter.AND.push({protipCategory:{id:this.protipFilter.protipCategory}}),this.protipFilter.publishers&&this.protipFilter.publishers.length&&t.filter.AND.push({organization:{id_in:this.protipFilter.publishers}})),t}}},P={name:"ProTipList",components:{awsImage:o["a"],protipFilter:g},mixins:[w],data:function(){return{proTips:[],filterModal:!1,enableStatus:!0}},computed:{isPublisher:function(){return"org-protips"===this.$route.name}},methods:{newProtip:function(){this.isPublisher?this.$router.push("/org-protips/new"):this.$router.push("/protips/new")},refresher:function(t){this.$apollo.queries.proTips.refetch(),setTimeout(function(){t()},500)},generateReportData:function(){if(this.proTips){var t=this.createReportJSON(),e=this.convertJsonToCSV(t);this.downloadReport(e)}},createReportJSON:function(){var t=[],e=!0,n=!1,r=void 0;try{for(var i,a=this.proTips[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value,s=o.status;o.inactive&&(s="INACTIVE");var u={Title:o.title,Summary:o.summary,Organization:o.organization&&o.organization.name,Status:s,Category:o.protipCategory&&o.protipCategory.name};t.push(u)}}catch(t){n=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}return t},convertJsonToCSV:function(t){var e=function(t,e){return null===e?"":e},n=Object.keys(t[0]),r=t.map(function(t){return n.map(function(n){return JSON.stringify(t[n],e)}).join(",")});return r.unshift(n.join(",")),r=r.join("\r\n"),r},downloadReport:function(t){var e=window.URL.createObjectURL(new Blob([t])),n=document.createElement("a");n.href=e,n.setAttribute("download","report_analysis.csv"),document.body.appendChild(n),n.click()}},apollo:{proTips:{query:a["e"],skip:function(){return this.isPublisher&&!this.$store.state.app.organizationId},fetchPolicy:"cache-and-network",variables:function(){var t=this.constructFilter();return this.isPublisher&&(t.filter.organization={id:this.$store.state.app.organizationId}),t}}}},S=P,F=Object(m["a"])(S,r,i,!1,null,null,null);F.options.__file="ProTipList.vue";e["default"]=F.exports},"7bbc":function(t,e,n){var r=n("6821"),i=n("9093").f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(t){return o.slice()}};t.exports.f=function(t){return o&&"[object Window]"==a.call(t)?s(t):i(r(t))}},"7d7e":function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("5640"),i=n.n(r),a=n("9530"),o=n.n(a);function s(){var t=i()(["\n  mutation ConvertImageMutation($key: String!, $tag: String!, $width: Int!){\n    convertImage(\n      key: $key\n      tag: $tag\n      width: $width\n    ){\n      success\n      error\n      info\n    }\n  }\n"]);return s=function(){return t},t}var u=o()(s())},8843:function(t,e,n){"use strict";var r=n("ed34"),i=n.n(r);i.a},"8a81":function(t,e,n){"use strict";var r=n("7726"),i=n("69a8"),a=n("9e1e"),o=n("5ca1"),s=n("2aba"),u=n("67ab").KEY,l=n("79e5"),c=n("5537"),p=n("7f20"),f=n("ca5a"),d=n("2b4c"),m=n("37c8"),h=n("3a72"),g=n("d4c0"),y=n("1169"),b=n("cb7c"),v=n("d3f4"),$=n("4bf8"),C=n("6821"),w=n("6a99"),P=n("4630"),S=n("2aeb"),F=n("7bbc"),T=n("11e9"),x=n("2621"),I=n("86cc"),q=n("0d58"),k=T.f,O=I.f,_=F.f,D=r.Symbol,A=r.JSON,N=A&&A.stringify,E="prototype",j=d("_hidden"),R=d("toPrimitive"),z={}.propertyIsEnumerable,U=c("symbol-registry"),M=c("symbols"),J=c("op-symbols"),W=Object[E],B="function"==typeof D&&!!x.f,Q=r.QObject,V=!Q||!Q[E]||!Q[E].findChild,L=a&&l(function(){return 7!=S(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=k(W,e);r&&delete W[e],O(t,e,n),r&&t!==W&&O(W,e,r)}:O,G=function(t){var e=M[t]=S(D[E]);return e._k=t,e},K=B&&"symbol"==typeof D.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof D},Y=function(t,e,n){return t===W&&Y(J,e,n),b(t),e=w(e,!0),b(n),i(M,e)?(n.enumerable?(i(t,j)&&t[j][e]&&(t[j][e]=!1),n=S(n,{enumerable:P(0,!1)})):(i(t,j)||O(t,j,P(1,{})),t[j][e]=!0),L(t,e,n)):O(t,e,n)},H=function(t,e){b(t);var n,r=g(e=C(e)),i=0,a=r.length;while(a>i)Y(t,n=r[i++],e[n]);return t},X=function(t,e){return void 0===e?S(t):H(S(t),e)},Z=function(t){var e=z.call(this,t=w(t,!0));return!(this===W&&i(M,t)&&!i(J,t))&&(!(e||!i(this,t)||!i(M,t)||i(this,j)&&this[j][t])||e)},tt=function(t,e){if(t=C(t),e=w(e,!0),t!==W||!i(M,e)||i(J,e)){var n=k(t,e);return!n||!i(M,e)||i(t,j)&&t[j][e]||(n.enumerable=!0),n}},et=function(t){var e,n=_(C(t)),r=[],a=0;while(n.length>a)i(M,e=n[a++])||e==j||e==u||r.push(e);return r},nt=function(t){var e,n=t===W,r=_(n?J:C(t)),a=[],o=0;while(r.length>o)!i(M,e=r[o++])||n&&!i(W,e)||a.push(M[e]);return a};B||(D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(n){this===W&&e.call(J,n),i(this,j)&&i(this[j],t)&&(this[j][t]=!1),L(this,t,P(1,n))};return a&&V&&L(W,t,{configurable:!0,set:e}),G(t)},s(D[E],"toString",function(){return this._k}),T.f=tt,I.f=Y,n("9093").f=F.f=et,n("52a7").f=Z,x.f=nt,a&&!n("2d00")&&s(W,"propertyIsEnumerable",Z,!0),m.f=function(t){return G(d(t))}),o(o.G+o.W+o.F*!B,{Symbol:D});for(var rt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),it=0;rt.length>it;)d(rt[it++]);for(var at=q(d.store),ot=0;at.length>ot;)h(at[ot++]);o(o.S+o.F*!B,"Symbol",{for:function(t){return i(U,t+="")?U[t]:U[t]=D(t)},keyFor:function(t){if(!K(t))throw TypeError(t+" is not a symbol!");for(var e in U)if(U[e]===t)return e},useSetter:function(){V=!0},useSimple:function(){V=!1}}),o(o.S+o.F*!B,"Object",{create:X,defineProperty:Y,defineProperties:H,getOwnPropertyDescriptor:tt,getOwnPropertyNames:et,getOwnPropertySymbols:nt});var st=l(function(){x.f(1)});o(o.S+o.F*st,"Object",{getOwnPropertySymbols:function(t){return x.f($(t))}}),A&&o(o.S+o.F*(!B||l(function(){var t=D();return"[null]"!=N([t])||"{}"!=N({a:t})||"{}"!=N(Object(t))})),"JSON",{stringify:function(t){var e,n,r=[t],i=1;while(arguments.length>i)r.push(arguments[i++]);if(n=e=r[1],(v(e)||void 0!==t)&&!K(t))return y(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!K(e))return e}),r[1]=e,N.apply(A,r)}}),D[E][R]||n("32e9")(D[E],R,D[E].valueOf),p(D,"Symbol"),p(Math,"Math",!0),p(r.JSON,"JSON",!0)},ac4d:function(t,e,n){n("3a72")("asyncIterator")},bd43:function(t,e,n){"use strict";var r=n("41e2"),i=n.n(r);i.a},d4c0:function(t,e,n){var r=n("0d58"),i=n("2621"),a=n("52a7");t.exports=function(t){var e=r(t),n=i.f;if(n){var o,s=n(t),u=a.f,l=0;while(s.length>l)u.call(t,o=s[l++])&&e.push(o)}return e}},dd82:function(t,e,n){"use strict";n.d(e,"a",function(){return m}),n.d(e,"d",function(){return h}),n.d(e,"c",function(){return g}),n.d(e,"e",function(){return y}),n.d(e,"b",function(){return b});var r=n("5640"),i=n.n(r),a=n("9530"),o=n.n(a);function s(){var t=i()(["\n  mutation CreateProtipCategoryMutation(\n    $name: String!,\n    $description: String\n  ) {\n    createProTipCategory(\n      data: {\n        name: $name,\n        description: $description\n      }\n    )\n    {\n      ...ProtipCategoryFragment\n    }\n  }\n  ","\n"]);return s=function(){return t},t}function u(){var t=i()(["\n  mutation UpdateProtipCategoryMutation(\n    $id: ID!\n    $name: String!,\n    $description: String\n  ) {\n    updateProTipCategory(\n      where: {id: $id}\n      data: {\n        name: $name,\n        description: $description\n      }\n    )\n    {\n      ...ProtipCategoryFragment\n    }\n  }\n  ","\n"]);return u=function(){return t},t}function l(){var t=i()(["\n  mutation DeleteProtipCategoryMutation($id: ID!) {\n    deleteProTipCategory(where: {id: $id }) {\n      id\n    }\n  }\n"]);return l=function(){return t},t}function c(){var t=i()(["\n  query ProtipCategoryQuery($id: ID!) {\n    proTipCategory(where: {\n      id: $id\n    }) {\n      ...ProtipCategoryFragment\n    }\n  }\n  ","\n"]);return c=function(){return t},t}function p(){var t=i()(["\n  query ProtipCategoryQuery {\n    proTipCategories(orderBy: name_ASC) {\n      ...ProtipCategoryFragment\n    }\n  }\n  ","\n"]);return p=function(){return t},t}function f(){var t=i()(["\n  fragment ProtipCategoryFragment on ProTipCategory {\n    id\n    name\n    description\n  }\n"]);return f=function(){return t},t}var d=o()(f()),m=o()(p(),d),h=o()(c(),d),g=o()(l()),y=o()(u(),d),b=o()(s(),d)},ed34:function(t,e,n){},ed6f:function(t,e,n){"use strict";n.d(e,"b",function(){return C}),n.d(e,"e",function(){return w}),n.d(e,"a",function(){return P}),n.d(e,"f",function(){return F}),n.d(e,"j",function(){return T}),n.d(e,"d",function(){return x}),n.d(e,"k",function(){return I}),n.d(e,"i",function(){return q}),n.d(e,"h",function(){return k}),n.d(e,"c",function(){return O}),n.d(e,"g",function(){return _});var r=n("5640"),i=n.n(r),a=n("9530"),o=n.n(a),s=n("de9e");function u(){var t=i()(["\n  mutation PublisherCreateProTipMutation(\n    $title: String!,\n    $summary: String,\n    $text: String!,\n    $newImage: FileCreateOneInput!\n    $files: [ContentItemFileInput]\n    $protipCategory: ProTipCategoryCreateOneWithoutProtipsInput\n  ) {\n    publisherCreateProTip(\n      data: {\n        title: $title,\n        summary: $summary,\n        text: $text,\n        image: $newImage,\n        files: $files\n        protipCategory: $protipCategory\n      }\n    )\n    {\n      ...ProTipFragment\n    }\n  }\n  ","\n"]);return u=function(){return t},t}function l(){var t=i()(["\n  mutation CreateProTipMutation(\n    $status: PublishStatus,\n    $title: String!,\n    $summary: String,\n    $text: String!,\n    $newImage: FileCreateOneInput!\n    $related: [ID!]\n    $files: [ContentItemFileInput]\n    $inactive: Boolean\n    $organization: OrganizationCreateOneInput\n    $protipCategory: ProTipCategoryCreateOneWithoutProtipsInput\n  ) {\n    createProTip(\n      data: {\n        status: $status,\n        title: $title,\n        summary: $summary,\n        text: $text,\n        image: $newImage,\n        related: $related\n        files: $files\n        inactive: $inactive\n        organization: $organization\n        protipCategory: $protipCategory\n      }\n    )\n    {\n      ...ProTipFragment\n    }\n  }\n  ","\n"]);return l=function(){return t},t}function c(){var t=i()(["\n  mutation PublisherSubmitProTipMutation(\n    $id: ID!\n    $title: String,\n    $summary: String,\n    $text: String,\n    $newImage: FileUpdateOneRequiredInput,\n    $files: [ContentItemFileInput]\n    $protipCategory: ProTipCategoryUpdateOneWithoutProtipsInput\n  ) {\n    publisherSubmitProTip(\n      where: {id: $id}\n      data: {\n        title: $title,\n        text: $text,\n        summary: $summary,\n        image: $newImage,\n        files: $files,\n        protipCategory: $protipCategory\n      }\n    )\n    {\n      ...ProTipFragment\n    }\n  }\n  ","\n"]);return c=function(){return t},t}function p(){var t=i()(["\n  mutation PublisherUpdateProTipMutation(\n    $id: ID!\n    $title: String,\n    $summary: String,\n    $text: String,\n    $newImage: FileUpdateOneRequiredInput,\n    $files: [ContentItemFileInput]\n    $protipCategory: ProTipCategoryUpdateOneWithoutProtipsInput\n  ) {\n    publisherUpdateProTip(\n      where: {id: $id}\n      data: {\n        title: $title,\n        text: $text,\n        summary: $summary,\n        image: $newImage,\n        files: $files,\n        protipCategory: $protipCategory\n      }\n    )\n    {\n      ...ProTipFragment\n    }\n  }\n  ","\n"]);return p=function(){return t},t}function f(){var t=i()(["\n  mutation UpdateProTipMutation(\n    $id: ID!\n    $status: PublishStatus\n    $title: String,\n    $summary: String,\n    $text: String,\n    $newImage: FileUpdateOneRequiredInput,\n    $related: [ID!]\n    $files: [ContentItemFileInput]\n    $inactive: Boolean\n    $organization: OrganizationUpdateOneInput\n    $protipCategory: ProTipCategoryUpdateOneWithoutProtipsInput\n  ) {\n    updateProTip(\n      where: {id: $id}\n      data: {\n        status: $status,\n        title: $title,\n        text: $text,\n        summary: $summary,\n        image: $newImage,\n        related: $related,\n        files: $files,\n        inactive: $inactive\n        organization: $organization\n        protipCategory: $protipCategory\n      }\n    )\n    {\n      ...ProTipFragment\n    }\n  }\n  ","\n"]);return f=function(){return t},t}function d(){var t=i()(["\n  mutation DeleteProTipMutation($id: ID!) {\n    deleteProTip(where: {id: $id }) {\n      id\n    }\n  }\n"]);return d=function(){return t},t}function m(){var t=i()(["\n  query TipOfTheDayQuery {\n    tipOfTheDay{\n      ...ProTipFragment\n    }\n  }\n  ","\n"]);return m=function(){return t},t}function h(){var t=i()(["\n  query ProTipQuery($id: ID!) {\n    proTip(where: {\n      id: $id\n    }) {\n      ...ProTipFragment\n      files {\n        ...FileFragment\n      }\n    }\n  }\n  ","\n  ","\n"]);return h=function(){return t},t}function g(){var t=i()(["\n  fragment ProTipFragment on ProTip {\n    id,\n    title,\n    summary,\n    text,\n    createdAt,\n    status,\n    image {\n      ...FileFragment\n    }\n    files {\n      ...FileFragment\n    }\n    related {\n      id\n      title\n      image {\n        ...FileFragment\n      }\n    }\n    inactive\n    organization {\n      id\n      name\n      logo {\n        ...FileFragment\n      }\n    }\n    protipCategory {\n      id\n      name\n    }\n  }\n  ","\n"]);return g=function(){return t},t}function y(){var t=i()(["\n  query ProTipsQuery {\n    proTips(\n      orderBy: createdAt_DESC\n      where: {\n        status: ACTIVE\n        OR: [\n          {inactive: false},\n          {inactive: null}\n        ]\n      }\n    ) {\n      id\n      title\n      summary\n      text\n      createdAt\n      inactive\n      image {\n        ...FileFragment\n      }\n    }\n  }\n  ","\n"]);return y=function(){return t},t}function b(){var t=i()(["\n  query ProTipsQuery($orgId: ID!) {\n    proTips(\n      orderBy: createdAt_DESC\n      where: {\n        organization: {\n          id: $orgId\n        }\n      }\n    ) {\n      id\n      title\n      status\n      summary\n      text\n      createdAt\n      inactive\n      image {\n        ...FileFragment\n      }\n    }\n  }\n  ","\n"]);return b=function(){return t},t}function v(){var t=i()(["\n  query FilteredProtipsQuery($filter: ProTipWhereInput, $first: Int, $after: String, $skip: Int) {\n    proTips(\n      orderBy: title_ASC\n      first: $first\n      after: $after\n      where: $filter\n      skip: $skip\n    ) {\n      id\n      title\n      status\n      summary\n      text\n      createdAt\n      inactive\n      image {\n        ...FileFragment\n      }\n      organization {\n        id\n        name\n      }\n      protipCategory {\n        id\n        name\n      }\n    }\n  }\n  ","\n"]);return v=function(){return t},t}function $(){var t=i()(["\n  query ProTipsQuery {\n    proTips(orderBy: createdAt_DESC) {\n      id\n      title\n      status\n      summary\n      text\n      createdAt\n      inactive\n      image {\n        ...FileFragment\n      }\n    }\n  }\n  ","\n"]);return $=function(){return t},t}var C=o()($(),s["k"]),w=o()(v(),s["k"]),P=(o()(b(),s["k"]),o()(y(),s["k"])),S=o()(g(),s["k"]),F=o()(h(),S,s["k"]),T=o()(m(),S),x=o()(d()),I=o()(f(),S),q=o()(p(),S),k=o()(c(),S),O=o()(l(),S),_=o()(u(),S)},fcab:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fill"},[t.imageUrl?n("img",{attrs:{src:t.imageUrl}}):t._e()])},i=[];r._withStripped=!0;n("96cf");var a=n("c973"),o=n.n(a),s=(n("c5f6"),n("9755")),u=n("d67a"),l=n("7d7e"),c={name:"awsImage",props:{src:Object,default:String,expires:{type:Number,default:86400},tag:String,imageWidth:Number},methods:{tokenExpired:function(){var t=o()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["a"].dispatch("getCurrentSession");case 2:if(e=t.sent.getAccessToken().getJwtToken(),this.$store.state.app.jwtToken!==e){t.next=5;break}return t.abrupt("return",!1);case 5:return this.$store.dispatch("app/setJwtToken",e),t.abrupt("return",!0);case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),cachedUrl:function(){var t=o()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.src.url){t.next=2;break}return t.abrupt("return",this.src.url);case 2:return t.next=4,this.tokenExpired();case 4:if(!t.sent){t.next=7;break}return this.$store.dispatch("app/clearAwsCache"),t.abrupt("return");case 7:return t.abrupt("return",this.$store.getters["app/getAwsUrl"](this.awsSecret));case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),generateThumbnail:function(){var t=o()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$apollo.mutate({mutation:l["a"],variables:{key:this.src.secret,tag:this.tag,width:this.imageWidth}});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},computed:{isThumbnail:function(){return!!(this.src.secret&&this.tag&&this.imageWidth)},awsSecret:function(){return this.isThumbnail?"".concat(this.src.secret,"_").concat(this.tag):this.src.secret}},asyncComputed:{imageUrl:function(){var t=o()(regeneratorRuntime.mark(function t(){var e,n,r,i,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.src){t.next=2;break}return t.abrupt("return",this.default);case 2:return t.next=4,this.cachedUrl();case 4:if(e=t.sent,!e){t.next=7;break}return t.abrupt("return",e);case 7:if(!this.awsSecret){t.next=24;break}if(r=this.awsSecret,!this.isThumbnail){t.next=18;break}return t.next=12,s["a"].list(this.awsSecret);case 12:if(i=t.sent,i.length){t.next=18;break}return t.next=16,this.generateThumbnail();case 16:a=t.sent,a&&a.data&&a.data.convertImage&&a.data.convertImage.success||(r=this.src.secret);case 18:return t.next=20,s["a"].get(r,{expires:this.expires});case 20:return e=t.sent,n=(new Date).getTime()+1e3*(this.expires-60),this.$store.dispatch("app/cacheAwsUrl",{key:this.awsSecret,expiration:n,url:e}),t.abrupt("return",e);case 24:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},p=c,f=(n("bd43"),n("2877")),d=Object(f["a"])(p,r,i,!1,null,null,null);d.options.__file="awsImage.vue";e["a"]=d.exports}}]);