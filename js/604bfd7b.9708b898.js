(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["604bfd7b"],{1201:function(n,t,e){"use strict";e.d(t,"c",function(){return l}),e.d(t,"a",function(){return d}),e.d(t,"d",function(){return g}),e.d(t,"b",function(){return m});var i=e("5640"),r=e.n(i),a=e("9530"),s=e.n(a);function o(){var n=r()(["\n  mutation CreatePushNotificationMutation(\n    $heading: String!,\n    $content: String!,\n    $url: String,\n    $users: [ID!],\n    $organizations: [ID!]\n  ) {\n    createPushNotification(\n      data: {\n        heading: $heading,\n        content: $content,\n        url: $url,\n        users: $users,\n        organizations: $organizations\n      }\n    )\n    {\n      ...PushNotificationFragment\n    }\n  }\n  ","\n"]);return o=function(){return n},n}function c(){var n=r()(["\n  query PushNotificationQuery($id: ID!) {\n    pushNotification(\n      where: {id: $id}\n    ) {\n      ...PushNotificationFragment\n    }\n  }\n  ","\n"]);return c=function(){return n},n}function u(){var n=r()(["\n  query AllPushNotificationsQuery($first: Int, $skip: Int, $where: PushNotificationWhereInput) {\n    pushNotifications(orderBy: updatedAt_DESC, first: $first, skip: $skip, where: $where) {\n      ...PushNotificationFragment\n    }\n  }\n  ","\n"]);return u=function(){return n},n}function h(){var n=r()(["\n  query NumPushNotificationsQuery($where: PushNotificationWhereInput) {\n    numPushNotifications(where: $where)\n  }\n"]);return h=function(){return n},n}function f(){var n=r()(["\n  fragment PushNotificationFragment on PushNotification {\n    id\n    createdAt\n    users {\n      id\n      name\n    }\n    organizations {\n      id\n      name\n    }\n    from {\n      id\n      name\n    }\n    heading\n    content\n    url\n    lastResponse\n  }\n"]);return f=function(){return n},n}var p=s()(f()),l=s()(h()),d=s()(u(),p),g=s()(c(),p),m=s()(o(),p)},1973:function(n,t,e){n.exports=e("5bba")},"494d":function(n,t,e){n.exports=e("e1b7")},"522e":function(n,t,e){var i=e("f772"),r=e("ebfd").onFreeze;e("ce7e")("freeze",function(n){return function(t){return n&&i(t)?n(r(t)):t}})},5640:function(n,t,e){var i=e("1973"),r=e("494d");function a(n,t){return t||(t=n.slice(0)),r(i(n,{raw:{value:r(t)}}))}n.exports=a},"5bba":function(n,t,e){e("9d98");var i=e("584a").Object;n.exports=function(n,t){return i.defineProperties(n,t)}},"9d98":function(n,t,e){var i=e("63b6");i(i.S+i.F*!e("8e60"),"Object",{defineProperties:e("7e90")})},b206:function(n,t,e){"use strict";e.r(t);var i=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("q-page",[e("loading",{attrs:{query:n.$apollo.queries.pushNotifications}},[e("scroll",[e("q-pull-to-refresh",{attrs:{handler:n.refresher}},[n.pushNotifications.length?e("q-list",{attrs:{separator:""}},n._l(n.pushNotifications,function(t){return e("q-item",{key:t.id,staticClass:"basic-list-item",staticStyle:{"min-height":"64px",padding:"0 16px"},attrs:{to:t.id,append:""}},[e("q-item-side",{attrs:{inverted:"",letter:t.image?null:t.heading[0],color:"grey-6"}},[t.image?e("q-item-tile",{attrs:{avatar:""}},[e("aws-image",{attrs:{src:t.image}})],1):n._e()],1),e("q-item-main",{attrs:{label:t.heading}},[e("q-item-tile",{staticClass:"q-mb-sm",attrs:{stamp:""}},[n._v("\n                Sent on "+n._s(n._f("toDateAndTimeString")(t.createdAt))+"\n                "),t.lastResponse?[t.lastResponse.recipients?e("div",[n._v("\n                    to "+n._s(t.lastResponse.recipients)+" recipients\n                  ")]):n._e(),t.lastResponse.errors?e("div",[n._v("\n                    errors: "+n._s(t.lastResponse.errors.join(", "))+"\n                  ")]):n._e()]:n._e()],2)],1),e("q-item-side",{attrs:{right:"",icon:"keyboard_arrow_right"}})],1)})):e("transition",{attrs:{"enter-active-class":"animated fadeIn",appear:""}},[e("q-alert",{staticClass:"q-mb-sm",attrs:{color:"info",icon:"error",appear:""}},[n._v("\n            There are no push notifications, click below to add one.\n          ")])],1)],1)],1)],1),n.pushNotifications.length?e("q-layout-footer",[e("q-pagination",{staticClass:"row justify-center",attrs:{min:1,max:n.numPages,"direction-links":"","max-pages":10},model:{value:n.page,callback:function(t){n.page=t},expression:"page"}})],1):n._e(),e("q-page-sticky",{attrs:{position:"bottom-right",offset:[18,18]}},[e("q-fab",{staticClass:"white",attrs:{color:"primary",icon:"fa fa-plus"},on:{show:function(t){n.$router.push("/push_notifications/new")}}})],1)],1)},r=[];i._withStripped=!0;e("386d");var a=e("3156"),s=e.n(a),o=e("1201"),c=e("2f62"),u=e("1fe0"),h={name:"PushNotificationsList",data:function(){return{pushNotifications:[],pageSize:100,page:1,numPushNotifications:0,search:null,exporting:!1}},created:function(){this.setSearch=Object(u["a"])(this.setSearch,500)},watch:{searchString:{handler:function(n){this.setSearch(n)}}},computed:s()({numPages:function(){return Math.ceil(this.numPushNotifications/this.pageSize)}},Object(c["c"])("app",["searchString"])),methods:{setSearch:function(n){this.page=1,this.search=n},refresher:function(n){this.$apollo.queries.numPushNotifications.refetch(),setTimeout(function(){n()},500)}},apollo:{numPushNotifications:{query:o["c"],fetchPolicy:"cache-and-network",variables:function(){var n={};return this.search&&(n.where||(n.where={}),n.where={name_contains:this.search}),n}},pushNotifications:{query:o["a"],fetchPolicy:"cache-and-network",variables:function(){var n={first:this.pageSize,skip:(this.page-1)*this.pageSize};return this.search&&(n.where||(n.where={}),n.where={name_contains:this.search}),n}}}},f=h,p=e("2877"),l=Object(p["a"])(f,i,r,!1,null,null,null);l.options.__file="pushNotificationList.vue";t["default"]=l.exports},e1b7:function(n,t,e){e("522e"),n.exports=e("584a").Object.freeze}}]);