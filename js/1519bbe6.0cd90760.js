(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["1519bbe6"],{"0819":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",[n("loading",{attrs:{query:e.$apollo.queries.resource}},[n("div",{attrs:{slot:"loading"},slot:"loading"},[n("content-placeholders",{attrs:{rounded:!0}},[n("content-placeholders-img")],1)],1),e.resource.id?[n("scroll",{staticStyle:{background:"#fff"}},[n("render-resource",{staticStyle:{"padding-bottom":"48px"},attrs:{"resource-type":e.resourceType,events:e.events},on:{refresh:function(t){e.$apollo.queries.events.refetch()}},model:{value:e.resource,callback:function(t){e.resource=t},expression:"resource"}},[n("div",{attrs:{slot:"title"},slot:"title"})])],1)]:e._e()],2),n("q-layout-footer",[n("content-tabs",{attrs:{resource:e.resource},on:{refresh:function(t){e.$apollo.queries.events.refetch()}}})],1)],1)},s=[];r._withStripped=!0;var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-card",{staticClass:"bg-white text-dark resource-card",attrs:{id:"print-section"}},[r("q-card-media",{staticClass:"resource-image"},[e.value.image?r("aws-image",{attrs:{src:e.value.image,default:"https://images.pexels.com/photos/1068989/pexels-photo-1068989.jpeg?auto=compress&cs=tinysrgb&h=750&w=1260"}}):e._e()],1),r("div",{staticClass:"resource-title q-mb-sm"},[e._v(e._s(e.value.title))]),e.value.organization?r("div",{staticClass:"resource-org q-mb-sm"},[e.value.organization.logo?r("aws-image",{staticClass:"responsive q-mr-sm",staticStyle:{"vertical-align":"middle"},attrs:{src:e.value.organization.logo,width:"40px"}}):e._e(),r("span",[e._v(e._s(e.value.organization.name))])],1):e._e(),r("q-card-main",{staticClass:"resource-show-main"},[e.value.resourceCategory?r("div",{staticClass:"q-subheading q-mb-sm ellipsis"},[r("div",{staticClass:"q-pb-sm"},[e._v(e._s(e.value.resourceCategory.name))])]):e._e(),r("div",{staticClass:"q-caption q-mb-sm"},[r("div",{staticClass:"q-pb-sm"},[e._v("Tags: "+e._s(e.categoryList(e.value)))])]),r("div",{staticStyle:{"margin-bottom":"20px"},on:{click:function(t){e.loadDetail(t,"/curricula/"+e.value.id+"/reviews",!0)}}},[e.value.rating>0?r("div",[r("span",{staticStyle:{"font-weight":"700",color:"#FF8310","font-size":"23px",position:"relative",top:"-3px","margin-right":"8px"}},[e._v(e._s(parseFloat(Math.round(100*e.value.rating)/100).toFixed(1)))]),r("q-rating",{staticClass:"text-center cursor-pointer q-mb-sm",attrs:{slot:"subtitle",readonly:"",max:5,icon:"fa fa-star"},on:{click:function(t){e.loadDetail(t,"/curricula/"+e.value.id+"/reviews",!0)}},slot:"subtitle",model:{value:e.value.rating,callback:function(t){e.$set(e.value,"rating",t)},expression:"value.rating"}})],1):e._e(),r("div",{staticClass:"lower-item no-bg flex items-center clickable cursor-pointer print-hide"},[r("div",{staticClass:"lower-item-left q-mr-md"},[r("i",{staticClass:"fa fa-comment-dots"})]),e._v("\n            "+e._s(e.value.numReviews||0)+" Review"+e._s(1!=e.value.numReviews?"s":"")+"\n            "),r("span",{staticStyle:{"margin-left":"auto","font-weight":"600","font-size":"16px",color:"#09063c"},on:{click:function(t){t.stopPropagation(),e.createReview()}}},[e._v("Add a Review")])])]),r("div",{staticClass:"lower-item no-bg flex items-center"},[r("div",{staticClass:"lower-item-left q-mr-md"},[r("i",{staticClass:"fa fa-clock"})]),e._v("\n        "+e._s(e.formatDuration(e.value.duration))+"\n        "),e.isAdmin&&e.value&&e.value.id&&e.value.numReviews>0?r("span",{staticStyle:{"margin-left":"auto","font-weight":"600","font-size":"16px",color:"#09063c"},on:{click:function(t){return t.stopPropagation(),e.listReviews(t)}}},[e._v("\n          List Reviews\n        ")]):e._e()]),r("div",{staticClass:"lower-item no-bg flex items-center"},[r("div",{staticClass:"lower-item-left q-mr-md"},[r("i",{staticClass:"fa fa-pencil-ruler"})]),e._v("\n        "+e._s(e.formatGradeRange(e.value.gradeFrom,e.value.gradeTo))+"\n      ")]),e.events.length?r("div",{staticClass:"lower-item no-bg flex items-center"},[r("div",{staticClass:"lower-item-left q-mr-md"},[r("i",{staticClass:"fa fa-calendar"})]),e._v("\n        Schedule:\n        "),e._l(e.events,function(t,n){return r("q-chip",{key:n,staticClass:"q-ml-md cursor-pointer",attrs:{color:"primary","text-color":"white","icon-right":"delete"},on:{click:function(n){e.removeEvent(t)}}},[e._v("\n          "+e._s(t.groups[0].name)+" "+e._s(e._f("toDateString")(t.event.start.date))+" "+e._s(e._f("toTime")(t.event.start.date))+"\n        ")])})],2):e._e(),r("q-item-separator",{staticClass:"q-mt-lg"}),r("div",{staticClass:"q-body-1 text-weight-bold q-mt-lg q-mb-md"},[e._v("About this "+e._s(e.resourceType))]),r("p",{key:e.value.id,ref:"intro",staticClass:"q-subheading resource-introduction",domProps:{innerHTML:e._s(e.value.introduction)},on:{click:function(t){return t.preventDefault(),e.parseLink(t)}}})],1),e._l(e.contentSections(e.value),function(t){return r("div",{key:t.title,staticClass:"resource-includes"},[t.list&&t.list.length?[r("render-resource-list",{attrs:{resource:e.value,list:t.list,title:t.title,subtitle:t.subtitle,"show-numbers":t.numbers,files:t.fies}})]:e._e()],2)}),e.value.lessons&&e.value.lessons.length?e._t("lessons",[r("render-resource-children",{attrs:{list:e.value.lessons,title:"Modules"}})]):e._e(),e.value.activities&&e.value.activities.length?e._t("activities",[r("render-resource-children",{attrs:{list:e.value.activities,title:"Activities"}})]):e._e(),r("schedule-resource",{attrs:{resource:e.value},on:{refresh:function(t){e.$emit("refresh")}},model:{value:e.schedulerOpened,callback:function(t){e.schedulerOpened=t},expression:"schedulerOpened"}}),e.value.relatedProTips&&e.value.relatedProTips.length?[r("q-item-separator",{staticClass:"q-mt-lg"}),r("div",{staticClass:"q-body-1 text-weight-bold q-mt-lg q-mb-md"},[e._v("Related ProTips")]),r("q-list",{attrs:{separator:""}},e._l(e.value.relatedProTips,function(e){return r("q-item",{key:e.id,attrs:{to:"/tips/"+e.id,append:""}},[r("q-item-main",{attrs:{label:e.title}}),r("q-item-side",{attrs:{right:""}},[r("q-item-tile",{attrs:{stamp:""}},[r("aws-image",{attrs:{src:e.image,width:"64"}})],1)],1)],1)}))]:e._e(),r("div",{staticClass:"resource-includes",staticStyle:{"padding-top":"16px"}},[r("img",{staticStyle:{opacity:"0.1",margin:"24px auto 0",display:"block",position:"relative"},attrs:{alt:"Mott logo",src:n("ce15"),width:"80px",height:"80px"}})]),e.clickedEvent?r("q-modal",{model:{value:e.removeEventModal,callback:function(t){e.removeEventModal=t},expression:"removeEventModal"}},[r("remove-event",{attrs:{event:e.clickedEvent},on:{close:function(t){e.removeEventModal=!1},refresh:function(t){e.$emit("refresh")}}})],1):e._e()],2)},o=[];i._withStripped=!0;var a=n("2743"),c=n("858b"),l=n("2bb2"),u={methods:{createReview:function(){this.lastRoute||this.$store.commit("app/setLastRoute",[]),this.lastRoute.push(this.$route.path),this.$router.push("/curricula/".concat(this.$route.params.id,"/reviews/add"))}}},d=n("4eef"),v=n("5e20"),p=n("fcab"),m=n("d1ac"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"q-pa-xl"},[n("q-breadcrumbs",{staticClass:"q-pt-sm",attrs:{align:"center"}},[n("q-breadcrumbs-el",{attrs:{label:e.event.event.description}}),n("q-breadcrumbs-el",{attrs:{label:"Remove From Schedule",icon:"schedule"}})],1),n("div",{staticClass:"q-ma-lg"},[e._v("\n      This event is currently scheduled for the group\n      "),n("strong",[e._v(e._s(e.event.groups[0].name))]),e._v("\n      on\n      "),n("strong",[e._v(e._s(e._f("toShortDate")(e.event.event.start.date)))]),e._v("\n      at\n      "),n("strong",[e._v("\n        "+e._s(e._f("toTime")(e.event.event.start.date))+"\n        "),e.event.event.end&&e.event.event.end.date?[e._v("\n          - "+e._s(e._f("toTime")(e.event.event.end.date))+"\n        ")]:e._e()],2)]),n("q-btn",{staticClass:"float-right q-mb-lg",attrs:{color:"primary",label:"Remove Event",disabled:e.loading,loading:e.loading},on:{click:e.remove}}),n("q-btn",{staticClass:"float-right q-mb-lg q-mr-sm",attrs:{flat:"",color:"primary",label:"Cancel"},on:{click:function(t){e.$emit("close")}}})],1)])},h=[];f._withStripped=!0;n("a481");var g=n("80e9"),b={name:"RemoveEvent",props:{event:{type:Object,required:!0}},data:function(){return{loading:!1}},methods:{remove:function(){var e=this;if(!this.loading){this.loading=!0;var t=this;this.$apollo.mutate({mutation:g["p"],variables:{eventId:this.event.id}}).then(function(n){e.loading=!1,t.$q.notify({message:"".concat(e.event.event.description.replace("Content scheduled:","")," was unscheduled"),type:"positive"}),t.$emit("refresh"),t.$emit("close")}).catch(function(t){console.log("Error",t),e.loading=!1})}}}},_=b,k=n("2877"),y=Object(k["a"])(_,f,h,!1,null,null,null);y.options.__file="removeEvent.vue";var q=y.exports,w={name:"RenderResource",mixins:[c["a"],l["a"],u,a["a"]],components:{RenderResourceList:d["a"],RenderResourceChildren:v["a"],awsImage:p["a"],scheduleResource:m["a"],removeEvent:q},methods:{listReviews:function(){this.$router.push("/curricula/".concat(this.value.id,"/reviews"))},sendMessage:function(e){console.log("Sendmessage "+e+" cicked")},removeEvent:function(e){this.clickedEvent=e,this.removeEventModal=!0}},data:function(){return{schedulerOpened:!1,removeEventModal:!1,clickedEvent:null}},props:{value:Object,enableLink:Boolean,compact:Boolean,hideActions:Boolean,resourceType:String,events:Array},mounted:function(){var e=this;this.compact&&setTimeout(function(){e.$refs.intro.style.webkitLineClamp=6},100)}},x=w,C=Object(k["a"])(x,i,o,!1,null,null,null);C.options.__file="renderResource.vue";var $=C.exports,R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"print-hide"},[n("q-page-sticky",{attrs:{position:"bottom-right",offset:[0,0]}},[n("q-btn",{staticClass:"fixed",staticStyle:{right:"18px",bottom:"18px",width:"56px",height:"56px","font-size":"20px"},attrs:{round:"",color:"primary",icon:"fa fa-calendar-alt",direction:"up"},on:{click:e.openScheduler}}),n("q-btn",{staticClass:"fixed",staticStyle:{right:"18px",bottom:"160px",width:"56px",height:"56px","font-size":"24px"},attrs:{round:"",color:"secondary",icon:"print",direction:"up"},on:{click:e.printContent}})],1),n("q-fab",{staticClass:"fixed resource-options",staticStyle:{right:"18px",bottom:"18px"},attrs:{color:"white",icon:e.resource.bookmarked?"fa fa-bookmark":"far fa-bookmark","active-icon":e.resource.bookmarked?"fa fa-bookmark":"far fa-bookmark",push:""},on:{show:e.createBookmark,hide:e.createBookmark}}),n("schedule-resource",{attrs:{resource:e.resource},on:{refresh:function(t){e.$emit("refresh")}},model:{value:e.schedulerOpened,callback:function(t){e.schedulerOpened=t},expression:"schedulerOpened"}})],1)},E=[];R._withStripped=!0;n("7f7f");var S=n("3156"),T=n.n(S),M=n("d67a"),O=n("de9e"),I={name:"ContentTabs",components:{scheduleResource:m["a"]},data:function(){return{schedulerOpened:!1}},props:{resource:Object},methods:{sendMessage:function(e){console.log("Message: ".concat(e))},createBookmark:function(){var e=this;this.resource.bookmarked?this.$apollo.mutate({mutation:O["g"],variables:{id:this.$route.params.id}}).then(function(t){e.$q.notify({message:"Resource bookmark removed.",type:"positive"}),e.$ma.trackEvent({action:"Resource Bookmark Removed",properties:e.generateMixpanelProperties()})}):this.$apollo.mutate({mutation:O["e"],variables:{id:this.$route.params.id}}).then(function(t){e.$q.notify({message:"Resource bookmarked.",type:"positive"}),e.$ma.trackEvent({action:"Resource Bookmarked",properties:e.generateMixpanelProperties()})})},printContent:function(){this.$q.platform.is.cordova?cordova.plugins.printer.print(""):window.print(),this.$ma.trackEvent({action:"Resource Print Button Clicked",properties:this.generateMixpanelProperties()})},openScheduler:function(){this.$ma.trackEvent({action:"Resource Scheduler Opened",properties:this.generateMixpanelProperties()}),this.schedulerOpened=!0},generateMixpanelProperties:function(){return T()({},{resourceId:this.resource.id,resourceName:this.resource.name,resourceTitle:this.resource.title,resourceSubtitle:this.resource.subtitle,resourceType:this.resource.type,resourceCategories:this.resource.categories.map(function(e){return e.category}),resourceDuration:this.resource.duration,resourceAgeFrom:this.resource.ageFrom,resourceAgeTo:this.resource.ageTo,resourceNumReviews:this.resource.numReviews,resourceRating:this.resource.rating,resourceFeatured:this.resource.featured},M["a"].getters.userForMixpanel)}}},P=I,D=(n("662a"),Object(k["a"])(P,R,E,!1,null,null,null));D.options.__file="contentTabs.vue";var A=D.exports,z=n("8a18"),B={name:"ResourceShow",components:{RenderResource:$,ContentTabs:A},data:function(){return{resource:{},events:[],resourceType:null}},beforeDestroy:function(){this.$store.commit("app/setPageMeta",null)},methods:{typeToEnglish:function(e){return{COURSE:"Playlist",ACTIVITY:"Activity",LESSON:"Module"}[e]}},apollo:{resource:{query:O["r"],fetchPolicy:"cache-and-network",variables:function(){return{id:this.$route.params.id}},result:function(e){e.data&&(this.resourceType=this.typeToEnglish(e.data.resource.type),this.$store.commit("app/setPageMeta",{title:e.data.resource.title,subtitle:"".concat(this.resourceType)}))}},events:{query:z["e"],fetchPolicy:"cache-and-network",variables:function(){return{resourceId:this.resource.id}},skip:function(){return!this.resource.id}}}},F=B,L=Object(k["a"])(F,r,s,!1,null,null,null);L.options.__file="ResourceShow.vue";t["default"]=L.exports},"662a":function(e,t,n){"use strict";var r=n("f646"),s=n.n(r);s.a},"8a18":function(e,t,n){"use strict";n.d(t,"b",function(){return m}),n.d(t,"f",function(){return f}),n.d(t,"a",function(){return h}),n.d(t,"e",function(){return g}),n.d(t,"c",function(){return b}),n.d(t,"d",function(){return _});var r=n("5640"),s=n.n(r),i=n("9530"),o=n.n(i);function a(){var e=s()(["\n  subscription EventsSubscription {\n    eventSubscription {\n      mutation\n      node {\n        id\n        event\n      }\n      previousValues {\n        id\n      }\n    }\n  }\n"]);return a=function(){return e},e}function c(){var e=s()(["\n  query EventQuery($id: ID!) {\n    event( where: {id: $id}) {\n      id\n      event\n    }\n  }\n"]);return c=function(){return e},e}function l(){var e=s()(["\n  mutation DeleteEventMutation($id: ID!) {\n    deleteEvent(where: {id: $id }) {\n      id\n    }\n  }\n"]);return l=function(){return e},e}function u(){var e=s()(["\n  query RelatedEventsQuery($resourceId: ID!) {\n    events(\n      where: {\n        resources_some: {id: $resourceId}\n      }\n    ) {\n      id\n      event\n      groups {\n        id\n        name\n      }\n    }\n  }\n"]);return u=function(){return e},e}function d(){var e=s()(["\n  query AllEventsQuery($groupId: ID!) {\n    events(\n      where: {groupId: $groupId}\n      orderBy: createdAt_DESC) {\n      id\n      event\n      resources {\n        id\n      }\n    }\n  }\n"]);return d=function(){return e},e}function v(){var e=s()(["\n  mutation UpdateEventMutation($eventId: ID!, $event: Json!){\n    updateEvent(\n      where: {id: $eventId }\n      data: {\n        event: $event\n      }\n    ){\n      id\n      event\n    }\n  }\n"]);return v=function(){return e},e}function p(){var e=s()(["\n  mutation CreateEventMutation($event: Json!){\n    createEvent(\n      data: {\n        event: $event\n      }\n    ){\n      id\n      event\n    }\n  }\n"]);return p=function(){return e},e}var m=o()(p()),f=o()(v()),h=o()(d()),g=o()(u()),b=o()(l()),_=o()(c());o()(a())},ce15:function(e,t,n){e.exports=n.p+"img/Mizzen_Logo.c8440108.png"},f646:function(e,t,n){}}]);