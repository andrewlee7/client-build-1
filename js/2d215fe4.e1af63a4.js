(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d215fe4"],{c122:function(r,s,e){"use strict";e.r(s);var t=function(){var r=this,s=r.$createElement,t=r._self._c||s;return t("q-page",{staticClass:"row justify-center",attrs:{padding:""}},[t("div",{staticClass:"simple-signup"},[t("div",{staticClass:"simple-header q-pt-xl"},[t("img",{attrs:{alt:"Mott logo",src:e("dd00"),width:"160px"}})]),r.newPasswordRequired?[t("div",{staticClass:"q-title"},[r._v("Password Change Required")]),t("q-field",{staticClass:"q-mb-md",attrs:{helper:"Type the password you will use to login",error:r.$v.password.$error,"error-label":"Password must be 8 characters or more",dark:""}},[t("q-input",{attrs:{"float-label":"Password",type:"password",dark:""},on:{blur:r.$v.password.$touch},model:{value:r.password,callback:function(s){r.password="string"===typeof s?s.trim():s},expression:"password"}})],1),t("q-field",{staticClass:"q-mb-lg",attrs:{helper:"Re-type the password you will use to login",error:r.$v.passwordConfirm.$error,"error-label":"Password and Password Confirmation must match",dark:""}},[t("q-input",{attrs:{"float-label":"Password Confirmation",type:"password",dark:""},on:{blur:r.$v.passwordConfirm.$touch},model:{value:r.passwordConfirm,callback:function(s){r.passwordConfirm="string"===typeof s?s.trim():s},expression:"passwordConfirm"}})],1),t("q-field",{staticClass:"q-mb-md",attrs:{error:r.$v.terms.$error,"error-label":"You must agree to the term of service in order to use Mizzen",dark:""}},[t("label",{staticStyle:{"font-size":"14px"}},[t("q-checkbox",{attrs:{dark:""},on:{blur:r.$v.terms.$touch},model:{value:r.terms,callback:function(s){r.terms=s},expression:"terms"}}),r._v("\n          I agree to the Mizzen\n          "),t("span",{staticClass:"curson-pointer text-underline",on:{click:function(s){s.preventDefault(),r.showTerms=!0}}},[r._v("Terms of Service")]),r._v("\n            and\n          "),t("span",{staticClass:"curson-pointer text-underline",on:{click:function(s){s.preventDefault(),r.showPrivacy=!0}}},[r._v("\n            Privacy Policy\n          ")])],1)]),t("div",{staticClass:"row justify-center"},[t("q-btn",{staticClass:"full-width q-mt-lg q-mb-lg",attrs:{label:"Set Password",loading:r.loading,color:"primary",disable:r.$v.$invalid},on:{click:r.setPassword}},[t("q-spinner-facebook",{attrs:{slot:"loading"},slot:"loading"})],1)],1),t("div",{staticClass:"row justify-center"},[t("q-btn",{staticClass:"full-width q-mt-lg q-mb-lg",attrs:{flat:"",label:"Return to Sign In",color:"secondary"},on:{click:r.signIn}})],1)]:[t("q-input",{ref:"username",attrs:{error:r.error_login,autocapitalize:"none","float-label":r.error_login?"Username or Email can't be blank":"Username or Email",after:[{icon:"warning",error:!0,handler:function(){}}],dark:""},on:{keydown:function(s){if(!("button"in s)&&r._k(s.keyCode,"enter",13,s.key,"Enter"))return null;r.$refs.password.focus()}},model:{value:r.username,callback:function(s){r.username="string"===typeof s?s.trim():s},expression:"username"}}),t("q-input",{ref:"password",attrs:{type:"password",error:r.error_password,"float-label":r.error_password?"Password can't be blank":"Password",after:[{icon:"warning",error:!0,handler:function(){}}],dark:""},on:{keydown:function(s){return"button"in s||!r._k(s.keyCode,"enter",13,s.key,"Enter")?r.signIn(s):null}},model:{value:r.password,callback:function(s){r.password="string"===typeof s?s.trim():s},expression:"password"}}),t("div",{staticClass:"row justify-center"},[t("q-btn",{staticClass:"full-width q-mt-lg q-mb-sm",attrs:{"no-caps":"",size:"lg",label:"Sign In",loading:r.loading,color:"primary"},on:{click:r.login}}),t("q-btn",{staticClass:"full-width q-mb-lg force-shadow",staticStyle:{background:"#48447f"},attrs:{"no-caps":"",flat:"",dark:"",size:"lg",label:"Create a Mizzen Account"},on:{click:r.signUp}})],1),t("div",{staticClass:"row justify-center"},[t("q-btn",{attrs:{flat:"",label:"Forgot your password?",color:"grey-4"},on:{click:r.forgot}})],1),t("div",{staticClass:"row justify-center"},[t("q-btn",{attrs:{flat:"",label:"Confirm a Sign Up",color:"grey-4"},on:{click:r.verifyCode}})],1)]],2),t("q-modal",{model:{value:r.showTerms,callback:function(s){r.showTerms=s},expression:"showTerms"}},[t("q-modal-layout",[t("q-toolbar",{attrs:{slot:"header"},slot:"header"},[t("q-toolbar-title",[r._v("\n          Terms of Service\n        ")]),t("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:function(s){r.showTerms=!1}}})],1),r.showTerms?t("div",{staticClass:"q-pa-lg"},[t("terms-of-service")],1):r._e()],1)],1),t("q-modal",{model:{value:r.showPrivacy,callback:function(s){r.showPrivacy=s},expression:"showPrivacy"}},[t("q-modal-layout",[t("q-toolbar",{attrs:{slot:"header"},slot:"header"},[t("q-toolbar-title",[r._v("\n          Mizzen After School App Privacy Policy\n        ")]),t("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:function(s){r.showPrivacy=!1}}})],1),r.showPrivacy?t("div",{staticClass:"q-pa-lg"},[t("privacy-policy")],1):r._e()],1)],1)],1)},o=[];t._withStripped=!0;var n=e("00ef"),a=e("d67a"),i=e("b5ae"),l=e("0628"),c=e("adb4"),d={name:"SignIn",components:{PrivacyPolicy:c["a"],TermsOfService:l["a"]},data:function(){return{username:"",password:"",passwordConfirm:"",terms:!1,user:null,confirmView:!1,code:"",error:"",error_login:!1,error_password:!1,login_error:!1,loading:!1,newPasswordRequired:!1,showTerms:!1,showPrivacy:!1}},validations:function(){return this.newPasswordRequired?{username:{required:i["required"]},password:{required:i["required"],minLength:Object(i["minLength"])(8)},passwordConfirm:{sameAsPassword:Object(i["sameAs"])("password")},terms:{sameAs:Object(i["sameAs"])(function(){return!0})}}:{username:{required:i["required"]},password:{required:i["required"]}}},methods:{login:function(r){var s=this,e=this;this.error_login=!this.username,this.error_password=!this.password,this.error_login||this.error_password||this.login_error||(this.loading=!0,n["a"].signIn(this.username.toLowerCase(),this.password).then(function(r){return a["a"].commit("setUser",r),r}).then(function(r){if("NEW_PASSWORD_REQUIRED"!==r.challengeName)return r;e.loading=!1,e.password="",e.passwordConfirm="",e.user=r,e.newPasswordRequired=!0}).then(function(r){r&&(e.user=r,s.checkUser(),s.loading=!1)}).catch(function(r){return s.setError(r)}))},setPassword:function(){var r=this;n["a"].completeNewPassword(this.user,this.password).then(function(s){s&&(r.user=s,r.checkUser(),r.loading=!1,r.$q.notify({message:"Password successfully set.",type:"positive"}))}).catch(function(s){return r.setError(s)})},signIn:function(){this.user=null,this.newPasswordRequired=!1},checkUser:function(){var r=this,s=this.user;s&&n["a"].verifiedContact(s).then(function(s){a["a"].commit("setUserVerification",s),r.$router.push("/")})},confirm:function(){var r=this;n["a"].confirmSignIn(this.user,this.code).then(function(){r.$router.push("/")}).catch(function(s){return r.setError(s)})},forgot:function(){this.$router.push("/auth/forgotPassword")},verifyCode:function(){this.$router.push("/auth/confirmSignUp")},signUp:function(){this.$router.push("/signup/welcome")},setError:function(r){var s=this;this.error=r.message||r,this.loading=!1,this.login_error=!0,this.$q.dialog({title:"Error",message:this.error}).then(function(){s.login_error=!1})}}},u=d,f=e("2877"),p=Object(f["a"])(u,t,o,!1,null,null,null);p.options.__file="SignIn.vue";s["default"]=p.exports}}]);