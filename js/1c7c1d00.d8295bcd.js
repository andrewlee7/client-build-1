(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["1c7c1d00"],{1973:function(t,e,a){t.exports=a("5bba")},"2ae6":function(t,e,a){"use strict";var n=a("e6ce"),i=a.n(n);i.a},"494d":function(t,e,a){t.exports=a("e1b7")},"522e":function(t,e,a){var n=a("f772"),i=a("ebfd").onFreeze;a("ce7e")("freeze",function(t){return function(e){return t&&n(e)?t(i(e)):e}})},5640:function(t,e,a){var n=a("1973"),i=a("494d");function r(t,e){return e||(e=t.slice(0)),i(n(t,{raw:{value:i(e)}}))}t.exports=r},"5bba":function(t,e,a){a("9d98");var n=a("584a").Object;t.exports=function(t,e){return n.defineProperties(t,e)}},"6d9a":function(t,e,a){},"7bad":function(t,e,a){},"7ce8":function(t,e,a){"use strict";var n=a("6d9a"),i=a.n(n);i.a},"9d98":function(t,e,a){var n=a("63b6");n(n.S+n.F*!a("8e60"),"Object",{defineProperties:a("7e90")})},d4ef:function(t,e,a){"use strict";var n=a("7bad"),i=a.n(n);i.a},e1b7:function(t,e,a){a("522e"),t.exports=a("584a").Object.freeze},e64e:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"white-bg"},[a("scroll",[a("div",{class:{"analytics-box":!0,"left-drawer-open":this.$q.platform.is.desktop}},[a("div",{staticClass:"q-title"},[t._v("\n        Content Performance\n      ")]),a("analytics-line-chart",{attrs:{filter:t.filter}}),a("analytics-stats",{attrs:{filter:t.filter}})],1),a("div",{class:{"analytics-box":!0,"left-drawer-open":this.$q.platform.is.desktop}},[a("div",{staticClass:"q-title"},[t._v("\n        Provider Demographics\n      ")]),a("analytics-demographics",{attrs:{filter:t.filter}})],1),t.$apollo.loading?t._e():a("q-page-sticky",{attrs:{position:"bottom-right"}},[a("q-btn",{staticClass:"fixed",staticStyle:{right:"18px",bottom:"18px",width:"56px",height:"56px","font-size":"20px"},attrs:{round:"",color:"positive",icon:"fa fa-file-csv",direction:"up"},on:{click:t.generateAnalyticsData}})],1)],1)],1)},i=[];n._withStripped=!0;a("ac6a"),a("cadf"),a("456d");var r=a("3156"),s=a.n(r),c=a("2f62"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.loading?[a("content-placeholders",{attrs:{rounded:!0}},[a("content-placeholders-img",{staticStyle:{height:"200px"}})],1)]:[t.analyticsLineChart?a("apexchart",{attrs:{type:"line",options:t.chartOptions,series:t.series,height:"200px"}}):t._e()]],2)},l=[];o._withStripped=!0;var d=a("5640"),u=a.n(d),p=a("9530"),f=a.n(p);function h(){var t=u()(["\n  query AnalyticsExportQuery(\n    $startDate: DateTime!,\n    $endDate: DateTime!,\n    $resourceIds: [ID]!\n  ) {\n    analyticsExport(\n      where: {\n        startDate: $startDate\n        endDate: $endDate\n        resourceIds: $resourceIds\n      }\n    ) {\n      id\n      data\n    }\n  }\n"]);return h=function(){return t},t}function m(){var t=u()(["\n  query AnalyticsDemographicsQuery(\n    $startDate: DateTime!,\n    $endDate: DateTime!,\n    $resourceIds: [ID]!\n  ) {\n    analyticsDemographics(\n      where: {\n        startDate: $startDate\n        endDate: $endDate\n        resourceIds: $resourceIds\n      }\n    ) {\n      id\n      data\n    }\n  }\n"]);return m=function(){return t},t}function y(){var t=u()(["\n  query AnalyticsStatsQuery(\n    $startDate: DateTime!,\n    $endDate: DateTime!,\n    $resourceIds: [ID]!\n  ) {\n    analyticsStats(\n      where: {\n        startDate: $startDate\n        endDate: $endDate\n        resourceIds: $resourceIds\n      }\n    ) {\n      id\n      data\n    }\n  }\n"]);return y=function(){return t},t}function v(){var t=u()(["\n  query AnalyticsLineChartQuery(\n    $startDate: DateTime!,\n    $endDate: DateTime!,\n    $resourceIds: [ID]!\n  ) {\n    analyticsLineChart(\n      where: {\n        startDate: $startDate\n        endDate: $endDate\n        resourceIds: $resourceIds\n      }\n    ) {\n      id\n      data\n    }\n  }\n"]);return v=function(){return t},t}function g(){var t=u()(["\n  fragment TrackingMetricFragment on TrackingMetric {\n    id\n    createdAt\n    organization {\n      id\n      name\n    }\n    type\n    resource {\n      id\n      title\n    }\n  }\n"]);return g=function(){return t},t}f()(g());var x=f()(v()),b=f()(y()),D=f()(m()),C=f()(h()),q={name:"analyticsLineChart",props:{filter:Object},data:function(){return{analyticsLineChart:null,loading:!0}},methods:{formatter:function(t,e){return t>=1||0===t?t.toFixed(2):t.toFixed(1)}},computed:{series:function(){return this.analyticsLineChart?[{name:"Views",data:this.analyticsLineChart.data.map(function(t){return{x:t.created,y:t.count}})}]:[]},chartOptions:function(){var t=this;return{chart:{fontFamily:"Roboto, Helvetica Neue, Helvetica, Arial, sans-serif",height:350,zoom:{enabled:!1},toolbar:{show:!1},foreColor:"#616161"},dataLabels:{enabled:!0,formatter:function(e,a){var n=a.seriesIndex;return t.formatter(e,n)}},markers:{size:5},stroke:{width:3,curve:"smooth"},grid:{borderColor:"transparent",row:{colors:["#F5F7FC","transparent"],opacity:1}},xaxis:{type:"datetime",labels:{hideOverlappingLabels:!0,rotate:0},forceNiceScale:!0},yaxis:{labels:{formatter:function(e,a){var n=a.seriesIndex;return t.formatter(e,n)},forceNiceScale:!0}}}}},apollo:{analyticsLineChart:{query:x,variables:function(){return this.filter},fetchPolicy:"cache-first",update:function(t){return this.loading=!1,t.analyticsLineChart}}}},w=q,_=a("2877"),S=Object(_["a"])(w,o,l,!1,null,null,null);S.options.__file="analyticsLineChart.vue";var $=S.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pt-md",staticStyle:{"margin-top":"-10px"}},[a("div",{staticClass:"row text-center position-relative top-row items-center",staticStyle:{"z-index":"2"}},[a("q-item",{staticClass:"col class-card text-center items-center"},[a("q-item-tile",[a("div",{staticClass:"text-bold text-faded"},[t._v("PAGE VIEWS")]),a("div",{staticClass:"q-headline text-blue"},[t._v(t._s(t.pageViews))])])],1),a("q-item",{staticClass:"col class-card text-center items-center"},[a("q-item-tile",[a("div",{staticClass:"text-bold text-faded"},[t._v("UNIQUE VIEWS")]),a("div",{staticClass:"q-headline text-green"},[t._v(t._s(t.uniques))])])],1),a("q-item",{staticClass:"col class-card text-center items-center"},[a("q-item-tile",[a("div",{staticClass:"text-bold text-faded"},[t._v("BOOKMARKED")]),a("div",{staticClass:"q-headline text-orange"},[t._v(t._s(t.bookmarks))])])],1),a("q-item",{staticClass:"col class-card text-center items-center"},[a("q-item-tile",[a("div",{staticClass:"text-bold text-faded"},[t._v("SCHEDULED")]),a("div",{staticClass:"q-headline text-red"},[t._v(t._s(t.schedules))])])],1)],1)])},O=[];I._withStripped=!0;var E={name:"analyticsStats",props:{filter:Object},data:function(){return{analyticsStats:null}},methods:{getCount:function(t){return this.analyticsStats&&this.analyticsStats.data?this.analyticsStats.data[t]&&this.analyticsStats.data[t][0]&&this.analyticsStats.data[t][0].count:0}},computed:{pageViews:function(){return this.getCount("pageViews")},bookmarks:function(){return this.getCount("bookmarks")},uniques:function(){return this.getCount("uniques")},schedules:function(){return this.getCount("schedules")}},apollo:{analyticsStats:{query:b,fetchPolicy:"cache-first",variables:function(){return this.filter}}}},k=E,L=(a("2ae6"),Object(_["a"])(k,I,O,!1,null,"060351e7",null));L.options.__file="analyticsStats.vue";var j=L.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pt-md",staticStyle:{"margin-top":"-10px"}},[a("div",{staticClass:"row text-center position-relative top-row items-center",staticStyle:{"z-index":"2"}},[a("q-item",{staticClass:"col text-center items-center"},[a("q-item-tile",[a("div",{staticClass:"text-bold text-faded"},[t._v("LOCATION")]),a("div",{staticClass:"q-headline text-blue"},[t.loading?a("content-placeholders",{attrs:{rounded:!0}},[a("content-placeholders-img")],1):a("apexchart",{attrs:{type:"donut",options:t.chartOptions("locations"),series:t.getSeries("locations")}})],1)])],1),a("q-item",{staticClass:"col text-center items-center"},[a("q-item-tile",[a("div",{staticClass:"text-bold text-faded"},[t._v("SIZE")]),a("div",{staticClass:"q-headline text-blue"},[t.loading?a("content-placeholders",{attrs:{rounded:!0}},[a("content-placeholders-img")],1):a("apexchart",{attrs:{type:"donut",options:t.chartOptions("sizes"),series:t.getSeries("sizes")}})],1)])],1),a("q-item",{staticClass:"col text-center items-center"},[a("q-item-tile",[a("div",{staticClass:"text-bold text-faded"},[t._v("BUDGET")]),a("div",{staticClass:"q-headline text-blue"},[t.loading?a("content-placeholders",{attrs:{rounded:!0}},[a("content-placeholders-img")],1):a("apexchart",{attrs:{type:"donut",options:t.chartOptions("budgets"),series:t.getSeries("budgets")}})],1)])],1)],1)])},F=[];A._withStripped=!0;var T={name:"analyticsDemographics",props:{filter:Object},data:function(){return{analyticsDemographics:null,loading:!0}},methods:{chartOptions:function(t){return this.analyticsDemographics&&this.analyticsDemographics.data?{labels:this.analyticsDemographics.data[t].map(function(t){return t.label||"Unspecified"}),chart:{type:"donut",fontFamily:"Roboto, Helvetica Neue, Helvetica, Arial, sans-serif",foreColor:"#616161",toolbar:{show:!1}},legend:{show:!1}}:{}},getSeries:function(t){return this.analyticsDemographics&&this.analyticsDemographics.data?this.analyticsDemographics.data[t].map(function(t){return t.count}):[]}},apollo:{analyticsDemographics:{query:D,variables:function(){return this.filter},fetchPolicy:"cache-first",update:function(t){return this.loading=!1,t.analyticsDemographics}}}},z=T,P=(a("d4ef"),Object(_["a"])(z,A,F,!1,null,"030b8758",null));P.options.__file="analyticsDemographics.vue";var R=P.exports,U={name:"analyticsShow",components:{analyticsLineChart:$,analyticsStats:j,analyticsDemographics:R},data:function(){return{exporting:!1}},computed:s()({isPublisher:function(){return"PUBLISHER"===this.$route.meta.persona},filter:function(){var t=new Date;return{startDate:this.analyticsFilter.range[0]||t,endDate:this.analyticsFilter.range[1]||t,resourceIds:this.analyticsFilter.resourceIds||[]}}},Object(c["c"])("app",["analyticsFilter"])),methods:{generateAnalyticsData:function(){var t=this;this.exporting||(this.exporting=!0,this.$apollo.query({query:C,variables:this.filter}).then(function(e){if(e&&e.data&&e.data.analyticsExport){t.exporting=!1;var a=t.convertJsonToCSV(e.data.analyticsExport.data);t.downloadReport(a)}}))},convertJsonToCSV:function(t){if(t&&t[0]){var e=function(t,e){return null===e?"":e},a=Object.keys(t[0]),n=t.map(function(t){return a.map(function(a){return JSON.stringify(t[a],e)}).join(",")});return n.unshift(a.join(",")),n=n.join("\r\n"),n}},downloadReport:function(t){var e=window.URL.createObjectURL(new Blob([t])),a=document.createElement("a");a.href=e,a.setAttribute("download","analytics_report.csv"),document.body.appendChild(a),a.click()}}},V=U,N=(a("7ce8"),Object(_["a"])(V,n,i,!1,null,"07919752",null));N.options.__file="AnalyticsShow.vue";e["default"]=N.exports},e6ce:function(t,e,a){}}]);